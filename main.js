(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var n=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===n?new Date(t.getTime()):"number"==typeof t||"[object Number]"===n?new Date(t):("string"!=typeof t&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})({});var s={};function o(){return s}function a(s,a){var r,c,d,i,l,u,m,p;e(1,arguments);var y=o(),k=n(null!==(r=null!==(c=null!==(d=null!==(i=null==a?void 0:a.weekStartsOn)&&void 0!==i?i:null==a||null===(l=a.locale)||void 0===l||null===(u=l.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==d?d:y.weekStartsOn)&&void 0!==c?c:null===(m=y.locale)||void 0===m||null===(p=m.options)||void 0===p?void 0:p.weekStartsOn)&&void 0!==r?r:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=t(s),v=h.getDay(),f=(v<k?7:0)+v-k;return h.setDate(h.getDate()-f),h.setHours(0,0,0,0),h}function r(t,n,s){e(2,arguments);var o=a(t,s),r=a(n,s);return o.getTime()===r.getTime()}class c{constructor(e){this.name=e,this.tasks=[]}setName(e){this.name=e}getName(){return this.name}setTasks(e){this.tasks=e}getTasks(){return this.tasks}addTask(e){this.tasks.find((t=>t.name===e))||this.tasks.push(e)}deleteTask(e){this.tasks=this.tasks.filter((t=>t.name!==e))}getTasksToday(){const e=(new Date).toLocaleDateString().split("/"),t=e[0],n=e[1],s=e[2];let o=s+"-"+t+"-"+n;parseInt(t)<10&&(o=s+"-0"+t+"-"+n);const a=this.tasks.filter((e=>e.dueDate===o));return a}getTasksWeek(){const n=this.tasks.filter((n=>function(t,n){return e(1,arguments),r(t,Date.now(),n)}(t(new Date(n.dueDate)))));return n}getTasksImportant(){const e=this.tasks.filter((e=>"High"===e.priority));return e}}class d{constructor(e,t,n,s){this.title=e,this.desc=t,this.dueDate=n,this.priority=s}setName(e){this.name=e}getName(){return this.name}setDate(e){this.dueDate=e}getDate(){return this.dueDate}getPriority(){return this.priority}}const i=document.querySelector(".newTask"),l=document.querySelector(".modal"),u=document.querySelector(".close"),m=document.querySelector(".modalForm"),p=document.querySelector(".projectModal"),y=document.querySelector(".closeProj");i.onclick=function(){m.reset(),l.style.display="block",p.style.display="none"},u.onclick=function(){l.style.display="none"},y.onclick=function(){p.style.display="none"},window.onclick=function(e){e.target==l&&(l.style.display="none")};let k=[];const h=new c("Inbox"),v=new c("Today"),f=new c("Upcoming"),S=new c("Important");k.push(h),k.push(v),k.push(f),k.push(S);let g=h;const E=document.querySelector("#all");E.addEventListener("click",(()=>{b(h,E)}));const w=document.querySelector("#today");w.addEventListener("click",(()=>{T(),b(v,w),document.querySelector(".newTask").style.display="none"}));const q=document.querySelector("#upcoming");q.addEventListener("click",(()=>{C(),b(f,q),document.querySelector(".newTask").style.display="none"}));const D=document.querySelector("#important");D.addEventListener("click",(()=>{j(),b(S,D),document.querySelector(".newTask").style.display="none"}));const b=(e,t)=>{document.querySelectorAll(".project").forEach((e=>{e.classList.remove("active")})),t.classList.add("active"),g=e,document.querySelector(".newTask").style.display="flex",document.querySelector(".tasks").textContent="",e.tasks.forEach((e=>N(e.title,e.desc,e.dueDate,e.priority))),document.querySelector(".taskWrapTitle").textContent=g.name},L=e=>{const t=document.querySelector(".projectsDisplay"),n=document.createElement("button");n.classList.add("btnCustom"),n.classList.add("project"),n.id=e.split(" ").join("");const s=document.createElement("div");s.classList.add("btnTxt"),s.textContent=e;const o=document.createElement("button");o.textContent="X",o.classList.add("remove"),n.appendChild(s),n.appendChild(o),t.appendChild(n),o.addEventListener("click",(()=>{(()=>{const e=o.parentElement.firstChild,t=k.find((t=>t.name===e.textContent)),n=k.indexOf(t);n>-1&&k.splice(n,1)})(),o.parentElement.remove(),O(k)}))};document.querySelector(".modalForm").onsubmit=function(){event.preventDefault();const e=document.querySelector("#name").value,t=document.querySelector("#desc").value,n=document.querySelector("#due").value,s=document.querySelector("#urgent").value,o=new d(e,t,n,s);o.name=e,g.tasks.find((e=>e.name===o.name))?alert("You can not have two tasks with identical names"):(g.tasks.push(o),N(e,t,n,s),l.style.display="none",O(k))};const T=()=>{v.tasks=[],k.forEach((e=>{e!==v&&e!==f&&e!==S&&e.getTasksToday().forEach((e=>{v.tasks.push(e)}))}))},C=()=>{f.tasks=[],k.forEach((e=>{e!==v&&e!==f&&e!==S&&e.getTasksWeek().forEach((e=>{f.tasks.push(e)}))}))},j=()=>{S.tasks=[],k.forEach((e=>{e!==v&&e!==f&&e!==S&&e.getTasksImportant().forEach((e=>{S.tasks.push(e)}))}))};document.querySelector("#addProject").addEventListener("click",(()=>{document.querySelector(".projectModal").style.display="flex"})),document.querySelector(".projForm").onsubmit=function(){event.preventDefault();const e=document.querySelector("#projName").value,t=new c(e);t.name=e,x(t,e);const n=document.getElementById(e.split(" ").join(""));n.addEventListener("click",(()=>{b(t,n)})),document.querySelector(".projectModal").style.display="none",O(k)};const x=(e,t)=>{k.find((t=>t.name===e.name))?alert("You can not have two Projects with identical names"):(k.push(e),L(t))},N=(e,t,n,s)=>{const o=document.querySelector(".tasks"),a=document.createElement("div");a.classList.add("taskBody"),o.appendChild(a);const r=document.createElement("div");r.classList.add("taskTitle");const c=document.createElement("div");c.classList.add("taskDesc");const d=document.createElement("div");d.classList.add("taskDue");const i=document.createElement("div");i.classList.add("taskPriority");const l=document.createElement("div");l.classList.add("editContainer");const u=document.createElement("button");u.classList.add("editTask"),u.addEventListener("click",(()=>{I(e,t,n,s)}));const m=document.createElement("img");m.classList.add("editImg"),m.src="./imgFont/edit.png",m.alt="edit";const p=document.createElement("button");p.classList.add("taskRemove"),p.textContent="X",p.addEventListener("click",(()=>{g.tasks=g.tasks.filter((t=>t.name!==e)),a.remove(),O(k)}));const y=n.split("-").join("/");void 0===n.split("-")&&(y=n),r.textContent=e,c.textContent=t,i.textContent="Priority: "+s,"Low"===s&&(i.style.textDecoration="underline 3px solid green"),"Medium"===s&&(i.style.textDecoration="underline 3px solid yellow"),"High"===s&&(i.style.textDecoration="underline 3px solid red"),d.textContent=""===y?"Due On: Whenever":"Due On: "+y;const h=document.createElement("div");h.classList.add("wrapperTask"),h.appendChild(r),h.appendChild(l),l.appendChild(u),u.appendChild(m),l.appendChild(p);const v=document.createElement("div");v.classList.add("wrapperTask"),v.appendChild(c);const f=document.createElement("div");f.classList.add("wrapperTask"),f.appendChild(d),f.appendChild(i),a.appendChild(h),a.appendChild(v),a.appendChild(f)},I=(e,t,n,s)=>{const o=document.querySelector(".editModal");o.style.display="block",p.style.display="none";const a=document.querySelector(".editName"),r=document.querySelector(".editDesc"),c=document.querySelector(".editDate"),d=document.querySelector(".editPrio");a.value=e,r.value=t,c.value=n,d.value=s,document.querySelector(".editClose").addEventListener("click",(()=>{o.style.display="none"})),window.addEventListener("click",(e=>{e.target==o&&(o.style.display="none")})),document.querySelector(".modalEditForm").onsubmit=function(){event.preventDefault();const t=document.querySelector(".editName").value,n=document.querySelector(".editDesc").value,s=document.querySelector(".editDate").value,a=document.querySelector(".editPrio").value,r=g.tasks.filter((t=>t.name===e))[0];r.title=t,r.desc=n,r.dueDate=s,r.priority=a,r.name=t,document.querySelector(".tasks").textContent="",g.tasks.forEach((e=>{N(e.title,e.desc,e.dueDate,e.priority)})),o.style.display="none",T(),C(),j(),O(k)}},O=e=>{localStorage.setItem("projects",JSON.stringify(e))};(()=>{const e=JSON.parse(localStorage.getItem("projects")),t=e.filter((e=>"Inbox"===e.name))[0];h.setTasks(t.tasks),e.forEach((e=>{if("Today"!==e.name&&"Upcoming"!==e.name&&"Important"!==e.name&&"Inbox"!==e.name){console.log(e),L(e.name);const t=document.getElementById(e.name.split(" ").join(""));t.addEventListener("click",(()=>{b(e,t)}))}})),t.tasks.forEach((e=>{N(e.title,e.desc,e.dueDate,e.priority)}))})(),window.addEventListener("dragend",(()=>{}))})();